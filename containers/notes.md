Performan using the new algorithm is worse on Haswell. (Better otherwise)

It's not quite clear yet why. But seems to be caused by an increased branch missprediction rate.

